"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const _=require("electron-store"),b=require("fs"),S=require("path"),l=require("electron"),y=require("http"),f=require("url"),w=require("metaweblog-api"),c=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},m=c(_),n=c(b),i=c(S),F=c(y),x=c(w),M={name:"settings",cwd:"setting",defaults:{publish:{abstractMode:"article",mathjax:!0,abstractNum:120,highlight:!1},sites:[{name:"Sample Site Config",url:"https://www.example.com/xmlrpc.php",username:"username",password:"",selected:!0}],detail:{notCheck:!0,forcedUpdate:!1,getNetPic:!1},theme:!0,language:"zh",filelist:!0}},a=new m.default(M),p=new m.default({name:"use-record",defaults:{tabs:[{type:"welcome",modified:!1,filePath:""}],"tab-current":0}}),P={getLanguage(){return a.get("language","zh")},storeSettingsClear(){return a.clear()},storeSettingsSet(e,t){a.set(e,t)},storeSettingsGet(e,t){return a.get(e,t)},storeRecordSet(e,t){return p.set(e,t)},storeRecordGet(e,t){return p.get(e,t)},setShowFile(e){return a.set("filelist",e)},getShowFile(){const e=a.get("filelist");return typeof e=="boolean"?e:!0},getTheme(){return a.get("theme",!0)},setTheme(e){return a.set("theme",e)},openInEditor(){a.openInEditor()},getSettingsPath(){return a.path}},j={fsReadFile:n.default.readFile,fsReadFileSync(e){try{return n.default.readFileSync(e,{encoding:"base64"})}catch{return!1}},bufReadFileSync(e){try{const t=n.default.readFileSync(e,{encoding:"base64"});return Buffer.from(t,"base64")}catch{return!1}},fsWriteFile:n.default.writeFile,fsWriteFileSync:n.default.writeFileSync,fsExistsSync:n.default.existsSync,fsReaddirSync:n.default.readdirSync,fsStatSync:n.default.statSync,fsLstatSync:n.default.lstatSync,isFileOrDir(e,t){try{return n.default.lstatSync(i.default.join(e,t)).isDirectory()}catch{return!1}},isDir(e){try{return n.default.lstatSync(e).isDirectory()}catch{return!1}},fsLstat:n.default.lstat},R={pathBasename:i.default.basename,pathJoin:i.default.join,pathIsAbsolute:i.default.isAbsolute,pathDirname:i.default.dirname,pathExtname:i.default.extname,pathResolve:i.default.resolve};function v(e){if(e.trim().includes(" "))return!1;try{return new f.URL(e),!0}catch{return!1}}function E(e){return new Promise(t=>{v(e)||t(!1);const r={method:"HEAD",host:f.parse(e).host,path:f.parse(e).pathname,port:80};F.default.request(r,s=>{s.statusCode===void 0?t(!1):t(s.statusCode<400||s.statusCode>=500)}).end()})}const I={async checkUrlValid(e){return e=encodeURI(e),await E(e)},shell:l.shell,readFromClipboard(){return l.clipboard.readText()},versions:process.versions},d=["fromMain","exePath","version","menu.language","menu.welcome","menu.sample","addRecentDocument","menu.save","menu.settings","menu.open","menu.publish","menu.showfile","menu.closetab","menu.reloadfile","menu.theme","new-media-object","new-metaweblog","__static"],q={send:(e,t)=>{d.includes(e)&&l.ipcRenderer.send(e,t)},receive:(e,t)=>{if(d.includes(e)){const r=(o,...s)=>t(...s);return l.ipcRenderer.on(e,r),()=>{l.ipcRenderer.removeListener(e,r)}}},syncMsg:(e,t)=>{if(d.includes(e))return l.ipcRenderer.sendSync(e,t)}},A={jpg:"image/jpeg",jpeg:"image/jpeg",jpe:"image/jpeg",gif:"image/gif",png:"image/png",bmp:"image/bmp",tif:"image/tiff",tiff:"image/tiff",ico:"image/x-icon",webp:"image/webp"},D={initBlogApi(e){return new x.default(e)},newPost(e,t,r,o){return e.newPost("",t,r,o,!0)},editPost(e,t,r,o,s){return e.editPost(t,r,o,s,!0)},getPost(e,t,r,o){return e.getPost(t,r,o)},newMediaObject(e,t,r,o,s){const g=Buffer.from(n.default.readFileSync(s)),h={name:o,type:W(s),bits:g,overwrite:!0};return e.newMediaObject("",t,r,h)}};function W(e){let t=i.default.extname(e);t=t&&t.length>1&&t.substring(1)||"";const r=A[t];if(!r)throw new Error(`${t} \u6B64\u5A92\u4F53\u540E\u7F00\u4E0D\u652F\u6301`);return r}exports.blogApi=D;exports.ipc=q;exports.nodeFs=j;exports.nodePath=R;exports.other=I;exports.store=P;const{contextBridge:u}=require("electron");u.exposeInMainWorld("__electron_preload__blogApi",exports.blogApi);u.exposeInMainWorld("__electron_preload__ipc",exports.ipc);u.exposeInMainWorld("__electron_preload__nodeFs",exports.nodeFs);u.exposeInMainWorld("__electron_preload__nodePath",exports.nodePath);u.exposeInMainWorld("__electron_preload__other",exports.other);u.exposeInMainWorld("__electron_preload__store",exports.store);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguY2pzIiwic291cmNlcyI6WyIuLi9zcmMvc3RvcmUudHMiLCIuLi9zcmMvbm9kZUZzLnRzIiwiLi4vc3JjL25vZGVQYXRoLnRzIiwiLi4vc3JjL290aGVyLnRzIiwiLi4vc3JjL2lwY1dpdGhNYWluLnRzIiwiLi4vc3JjL2Jsb2ctYXBpLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIEBBdXRob3I6IHN6eFxyXG4gKiBARGF0ZTogMjAyMi0wNy0yMyAyMDowOTozNVxyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIyLTA4LTA1IDAwOjAxOjAyXHJcbiAqIEBEZXNjcmlwdGlvbjpcclxuICogQEZpbGVQYXRoOiBcXHB1c2gtbWFya2Rvd25cXHBhY2thZ2VzXFxwcmVsb2FkXFxzcmNcXHN0b3JlLnRzXHJcbiAqL1xyXG5pbXBvcnQgU3RvcmUgZnJvbSAnZWxlY3Ryb24tc3RvcmUnO1xyXG5jb25zdCBvcHRpb25zID0ge1xyXG4gIG5hbWU6ICdzZXR0aW5ncycsXHJcbiAgY3dkOiAnc2V0dGluZycsXHJcbiAgZGVmYXVsdHM6IHtcclxuICAgIHB1Ymxpc2g6IHtcclxuICAgICAgYWJzdHJhY3RNb2RlOiAnYXJ0aWNsZScsXHJcbiAgICAgIG1hdGhqYXg6IHRydWUsXHJcbiAgICAgIGFic3RyYWN0TnVtOiAxMjAsXHJcbiAgICAgIGhpZ2hsaWdodDogZmFsc2VcclxuICAgIH0sXHJcbiAgICBzaXRlczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgbmFtZTogJ1NhbXBsZSBTaXRlIENvbmZpZycsXHJcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20veG1scnBjLnBocCcsXHJcbiAgICAgICAgdXNlcm5hbWU6ICd1c2VybmFtZScsXHJcbiAgICAgICAgcGFzc3dvcmQ6ICcnLFxyXG4gICAgICAgIHNlbGVjdGVkOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIF0sXHJcbiAgICBkZXRhaWw6IHtcclxuICAgICAgbm90Q2hlY2s6IHRydWUsXHJcbiAgICAgIGZvcmNlZFVwZGF0ZTogZmFsc2UsXHJcbiAgICAgIGdldE5ldFBpYzogZmFsc2VcclxuICAgIH0sXHJcbiAgICB0aGVtZTogdHJ1ZSxcclxuICAgIGxhbmd1YWdlOiAnemgnLFxyXG4gICAgZmlsZWxpc3Q6IHRydWVcclxuICB9XHJcbn07XHJcbmNvbnN0IHN0b3JlU2V0dGluZ3MgPSBuZXcgU3RvcmUob3B0aW9ucyk7XHJcbmNvbnN0IHN0b3JlUmVjb3JkID0gbmV3IFN0b3JlKHtcclxuICBuYW1lOiAndXNlLXJlY29yZCcsXHJcbiAgZGVmYXVsdHM6IHtcclxuICAgIHRhYnM6IFtcclxuICAgICAge1xyXG4gICAgICAgIHR5cGU6ICd3ZWxjb21lJyxcclxuICAgICAgICBtb2RpZmllZDogZmFsc2UsXHJcbiAgICAgICAgZmlsZVBhdGg6ICcnXHJcbiAgICAgIH1cclxuICAgIF0sXHJcbiAgICAndGFiLWN1cnJlbnQnOiAwXHJcbiAgfVxyXG59KTtcclxuZXhwb3J0IGNvbnN0IHN0b3JlID0ge1xyXG4gIGdldExhbmd1YWdlKCkge1xyXG4gICAgcmV0dXJuIHN0b3JlU2V0dGluZ3MuZ2V0KCdsYW5ndWFnZScsICd6aCcpO1xyXG4gIH0sXHJcbiAgc3RvcmVTZXR0aW5nc0NsZWFyKCkge1xyXG4gICAgcmV0dXJuIHN0b3JlU2V0dGluZ3MuY2xlYXIoKTtcclxuICB9LFxyXG4gIHN0b3JlU2V0dGluZ3NTZXQoa2V5OiBhbnksIHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuICAgIHN0b3JlU2V0dGluZ3Muc2V0KGtleSwgdmFsdWUpO1xyXG4gIH0sXHJcbiAgc3RvcmVTZXR0aW5nc0dldChrZXk6IGFueSwgdmFsdWU/OiBhbnkpOiBhbnkge1xyXG4gICAgcmV0dXJuIHN0b3JlU2V0dGluZ3MuZ2V0KGtleSwgdmFsdWUpO1xyXG4gIH0sXHJcbiAgc3RvcmVSZWNvcmRTZXQoa2V5OiBhbnksIHZhbHVlOiBhbnkpIHtcclxuICAgIHJldHVybiBzdG9yZVJlY29yZC5zZXQoa2V5LCB2YWx1ZSk7XHJcbiAgfSxcclxuICBzdG9yZVJlY29yZEdldChrZXk6IGFueSwgdmFsdWU6IGFueSk6IGFueSB7XHJcbiAgICByZXR1cm4gc3RvcmVSZWNvcmQuZ2V0KGtleSwgdmFsdWUpO1xyXG4gIH0sXHJcbiAgc2V0U2hvd0ZpbGUodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgIHJldHVybiBzdG9yZVNldHRpbmdzLnNldCgnZmlsZWxpc3QnLCB2YWx1ZSk7XHJcbiAgfSxcclxuICBnZXRTaG93RmlsZSgpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IHJlcyA9IHN0b3JlU2V0dGluZ3MuZ2V0KCdmaWxlbGlzdCcpO1xyXG4gICAgaWYgKHR5cGVvZiByZXMgPT09ICdib29sZWFuJykgcmV0dXJuIHJlcztcclxuICAgIGVsc2UgcmV0dXJuIHRydWU7XHJcbiAgfSxcclxuICBnZXRUaGVtZSgpOiBhbnkge1xyXG4gICAgcmV0dXJuIHN0b3JlU2V0dGluZ3MuZ2V0KCd0aGVtZScsIHRydWUpO1xyXG4gIH0sXHJcbiAgc2V0VGhlbWUodGhlbWU6IGJvb2xlYW4pIHtcclxuICAgIHJldHVybiBzdG9yZVNldHRpbmdzLnNldCgndGhlbWUnLCB0aGVtZSk7XHJcbiAgfSxcclxuICBvcGVuSW5FZGl0b3IoKSB7XHJcbiAgICBzdG9yZVNldHRpbmdzLm9wZW5JbkVkaXRvcigpO1xyXG4gIH0sXHJcbiAgZ2V0U2V0dGluZ3NQYXRoKCkge1xyXG4gICAgcmV0dXJuIHN0b3JlU2V0dGluZ3MucGF0aDtcclxuICB9XHJcbn07XHJcbiIsIi8qXHJcbiAqIEBBdXRob3I6IHN6eFxyXG4gKiBARGF0ZTogMjAyMi0wNy0yMyAyMDoxNzowN1xyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIyLTA3LTI3IDE1OjU5OjA3XHJcbiAqIEBEZXNjcmlwdGlvbjpcclxuICogQEZpbGVQYXRoOiBcXHB1c2gtbWFya2Rvd25cXHBhY2thZ2VzXFxwcmVsb2FkXFxzcmNcXG5vZGVGcy50c1xyXG4gKi9cclxuaW1wb3J0IGZzIGZyb20gJ2ZzJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcbmV4cG9ydCBjb25zdCBub2RlRnMgPSB7XHJcbiAgZnNSZWFkRmlsZTogZnMucmVhZEZpbGUsXHJcbiAgZnNSZWFkRmlsZVN5bmMoZmlsZTogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gZnMucmVhZEZpbGVTeW5jKGZpbGUsIHsgZW5jb2Rpbmc6ICdiYXNlNjQnIH0pO1xyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9LFxyXG4gIGJ1ZlJlYWRGaWxlU3luYyhmaWxlOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHBpYyA9IGZzLnJlYWRGaWxlU3luYyhmaWxlLCB7IGVuY29kaW5nOiAnYmFzZTY0JyB9KTtcclxuICAgICAgLy8gY29uc29sZS5sb2coQnVmZmVyLmZyb20ocGljLCAnYmFzZTY0JykpO1xyXG4gICAgICByZXR1cm4gQnVmZmVyLmZyb20ocGljLCAnYmFzZTY0Jyk7XHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgZnNXcml0ZUZpbGU6IGZzLndyaXRlRmlsZSxcclxuICBmc1dyaXRlRmlsZVN5bmM6IGZzLndyaXRlRmlsZVN5bmMsXHJcbiAgZnNFeGlzdHNTeW5jOiBmcy5leGlzdHNTeW5jLFxyXG4gIGZzUmVhZGRpclN5bmM6IGZzLnJlYWRkaXJTeW5jLFxyXG4gIGZzU3RhdFN5bmM6IGZzLnN0YXRTeW5jLFxyXG4gIGZzTHN0YXRTeW5jOiBmcy5sc3RhdFN5bmMsXHJcbiAgaXNGaWxlT3JEaXIoX3BhdGg6IHN0cmluZywgZmlsZTogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzdGF0ID0gZnMubHN0YXRTeW5jKHBhdGguam9pbihfcGF0aCwgZmlsZSkpO1xyXG4gICAgICByZXR1cm4gc3RhdC5pc0RpcmVjdG9yeSgpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSxcclxuICBpc0RpcihwYXRoOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHN0YXQgPSBmcy5sc3RhdFN5bmMocGF0aCk7XHJcbiAgICAgIHJldHVybiBzdGF0LmlzRGlyZWN0b3J5KCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIC8vIGxzdGF0U3luYyB0aHJvd3MgYW4gZXJyb3IgaWYgcGF0aCBkb2Vzbid0IGV4aXN0XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9LFxyXG4gIGZzTHN0YXQ6IGZzLmxzdGF0XHJcbn07XHJcbiIsIi8qXHJcbiAqIEBBdXRob3I6IHN6eFxyXG4gKiBARGF0ZTogMjAyMi0wNy0yMyAxOToxMzoyMlxyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIyLTA4LTA1IDExOjUyOjU2XHJcbiAqIEBEZXNjcmlwdGlvbjpcclxuICogQEZpbGVQYXRoOiBcXHB1c2gtbWFya2Rvd25cXHBhY2thZ2VzXFxwcmVsb2FkXFxzcmNcXG5vZGVQYXRoLnRzXHJcbiAqL1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcclxuZXhwb3J0IGNvbnN0IG5vZGVQYXRoID0ge1xyXG4gIHBhdGhCYXNlbmFtZTogcGF0aC5iYXNlbmFtZSxcclxuICBwYXRoSm9pbjogcGF0aC5qb2luLFxyXG4gIHBhdGhJc0Fic29sdXRlOiBwYXRoLmlzQWJzb2x1dGUsXHJcbiAgcGF0aERpcm5hbWU6IHBhdGguZGlybmFtZSxcclxuICBwYXRoRXh0bmFtZTogcGF0aC5leHRuYW1lLFxyXG4gIHBhdGhSZXNvbHZlOiBwYXRoLnJlc29sdmVcclxufTtcclxuIiwiLypcclxuICogQEF1dGhvcjogc3p4XHJcbiAqIEBEYXRlOiAyMDIyLTA3LTIzIDIwOjI0OjA5XHJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMjItMDgtMDUgMTE6MzM6NDFcclxuICogQERlc2NyaXB0aW9uOlxyXG4gKiBARmlsZVBhdGg6IFxccHVzaC1tYXJrZG93blxccGFja2FnZXNcXHByZWxvYWRcXHNyY1xcb3RoZXIudHNcclxuICovXHJcbmltcG9ydCB7IHNoZWxsLCBjbGlwYm9hcmQgfSBmcm9tICdlbGVjdHJvbic7XHJcbmltcG9ydCBodHRwIGZyb20gJ2h0dHAnO1xyXG5pbXBvcnQgeyBwYXJzZSwgVVJMIH0gZnJvbSAndXJsJztcclxuXHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zaW5kcmVzb3JodXMvaXMtdXJsLXN1cGVyYi9ibG9iL21haW4vaW5kZXguanNcclxuZnVuY3Rpb24gaXNVcmwoc3RyOiBzdHJpbmcpIHtcclxuICBjb25zdCB0cmltbWVkU3RyID0gc3RyLnRyaW0oKTtcclxuICBpZiAodHJpbW1lZFN0ci5pbmNsdWRlcygnICcpKSByZXR1cm4gZmFsc2U7XHJcbiAgdHJ5IHtcclxuICAgIG5ldyBVUkwoc3RyKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXJsRXhpc3RzKHVybDogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICBpZiAoIWlzVXJsKHVybCkpIHtcclxuICAgICAgcmVzb2x2ZShmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgbWV0aG9kOiAnSEVBRCcsXHJcbiAgICAgIGhvc3Q6IHBhcnNlKHVybCkuaG9zdCxcclxuICAgICAgcGF0aDogcGFyc2UodXJsKS5wYXRobmFtZSxcclxuICAgICAgcG9ydDogODBcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcmVxID0gaHR0cC5yZXF1ZXN0KG9wdGlvbnMsIChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5zdGF0dXNDb2RlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXNvbHZlKGZhbHNlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXNvbHZlKHJlcy5zdGF0dXNDb2RlIDwgNDAwIHx8IHJlcy5zdGF0dXNDb2RlID49IDUwMCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmVxLmVuZCgpO1xyXG4gIH0pO1xyXG59XHJcbmV4cG9ydCBjb25zdCBvdGhlciA9IHtcclxuICBhc3luYyBjaGVja1VybFZhbGlkKHVybDogc3RyaW5nKSB7XHJcbiAgICB1cmwgPSBlbmNvZGVVUkkodXJsKTtcclxuICAgIHJldHVybiBhd2FpdCB1cmxFeGlzdHModXJsKTtcclxuICB9LFxyXG4gIHNoZWxsOiBzaGVsbCxcclxuICByZWFkRnJvbUNsaXBib2FyZCgpIHtcclxuICAgIHJldHVybiBjbGlwYm9hcmQucmVhZFRleHQoKTtcclxuICB9LFxyXG4gIHZlcnNpb25zOiBwcm9jZXNzLnZlcnNpb25zXHJcbn07XHJcbiIsIi8qXHJcbiAqIEBBdXRob3I6IHN6eFxyXG4gKiBARGF0ZTogMjAyMi0wNy0yMyAyMDowMzoxNVxyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIyLTA4LTAyIDIwOjA4OjAxXHJcbiAqIEBEZXNjcmlwdGlvbjpcclxuICogQEZpbGVQYXRoOiBcXHB1c2gtbWFya2Rvd25cXHBhY2thZ2VzXFxwcmVsb2FkXFxzcmNcXGlwY1dpdGhNYWluLnRzXHJcbiAqL1xyXG5pbXBvcnQgeyBpcGNSZW5kZXJlciB9IGZyb20gJ2VsZWN0cm9uJztcclxuY29uc3QgdmFsaWRDaGFubmVscyA9IFtcclxuICAnZnJvbU1haW4nLFxyXG4gICdleGVQYXRoJyxcclxuICAndmVyc2lvbicsXHJcbiAgJ21lbnUubGFuZ3VhZ2UnLFxyXG4gICdtZW51LndlbGNvbWUnLFxyXG4gICdtZW51LnNhbXBsZScsXHJcbiAgJ2FkZFJlY2VudERvY3VtZW50JyxcclxuICAnbWVudS5zYXZlJyxcclxuICAnbWVudS5zZXR0aW5ncycsXHJcbiAgJ21lbnUub3BlbicsXHJcbiAgJ21lbnUucHVibGlzaCcsXHJcbiAgJ21lbnUuc2hvd2ZpbGUnLFxyXG4gICdtZW51LmNsb3NldGFiJyxcclxuICAnbWVudS5yZWxvYWRmaWxlJyxcclxuICAnbWVudS50aGVtZScsXHJcbiAgJ25ldy1tZWRpYS1vYmplY3QnLFxyXG4gICduZXctbWV0YXdlYmxvZycsXHJcbiAgJ19fc3RhdGljJ1xyXG5dO1xyXG5leHBvcnQgY29uc3QgaXBjID0ge1xyXG4gIC8vIOa4suafk+i/m+eoi+WNleaWuemdouWPkemAgea2iOaBr1xyXG4gIHNlbmQ6IChjaGFubmVsOiBzdHJpbmcsIGRhdGE/OiBhbnkpID0+IHtcclxuICAgIC8vIHdoaXRlbGlzdCBjaGFubmVsc1xyXG4gICAgaWYgKHZhbGlkQ2hhbm5lbHMuaW5jbHVkZXMoY2hhbm5lbCkpIHtcclxuICAgICAgaXBjUmVuZGVyZXIuc2VuZChjaGFubmVsLCBkYXRhKTtcclxuICAgIH1cclxuICB9LFxyXG4gIHJlY2VpdmU6IChjaGFubmVsOiBzdHJpbmcsIGZ1bmM6IGFueSkgPT4ge1xyXG4gICAgaWYgKHZhbGlkQ2hhbm5lbHMuaW5jbHVkZXMoY2hhbm5lbCkpIHtcclxuICAgICAgLy8gRGVsaWJlcmF0ZWx5IHN0cmlwIGV2ZW50IGFzIGl0IGluY2x1ZGVzIGBzZW5kZXJgXHJcbiAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IChldmVudDogYW55LCAuLi5hcmdzOiBhbnlbXSkgPT4gZnVuYyguLi5hcmdzKTtcclxuICAgICAgaXBjUmVuZGVyZXIub24oY2hhbm5lbCwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICBpcGNSZW5kZXJlci5yZW1vdmVMaXN0ZW5lcihjaGFubmVsLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgc3luY01zZzogKGNoYW5uZWw6IHN0cmluZywgZGF0YT86IGFueSkgPT4ge1xyXG4gICAgaWYgKHZhbGlkQ2hhbm5lbHMuaW5jbHVkZXMoY2hhbm5lbCkpIHtcclxuICAgICAgcmV0dXJuIGlwY1JlbmRlcmVyLnNlbmRTeW5jKGNoYW5uZWwsIGRhdGEpOyAvLyBwcmludHMgXCJwb25nXCJcclxuICAgIH1cclxuICB9XHJcbn07XHJcbiIsIi8qXHJcbiAqIEBBdXRob3I6IHN6eFxyXG4gKiBARGF0ZTogMjAyMi0wOC0wMiAxNzo0MjoxNlxyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIyLTA4LTA1IDAwOjAwOjQ3XHJcbiAqIEBEZXNjcmlwdGlvbjpcclxuICogQEZpbGVQYXRoOiBcXHB1c2gtbWFya2Rvd25cXHBhY2thZ2VzXFxwcmVsb2FkXFxzcmNcXGJsb2ctYXBpLnRzXHJcbiAqL1xyXG5pbXBvcnQgTWV0YVdlYmxvZyBmcm9tICdtZXRhd2VibG9nLWFwaSc7XHJcbmltcG9ydCBmcyBmcm9tICdmcyc7XHJcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xyXG5cclxuY29uc3QgTUVESUFfTUlNRV9UWVBFUzogYW55ID0ge1xyXG4gIGpwZzogJ2ltYWdlL2pwZWcnLFxyXG4gIGpwZWc6ICdpbWFnZS9qcGVnJyxcclxuICBqcGU6ICdpbWFnZS9qcGVnJyxcclxuICBnaWY6ICdpbWFnZS9naWYnLFxyXG4gIHBuZzogJ2ltYWdlL3BuZycsXHJcbiAgYm1wOiAnaW1hZ2UvYm1wJyxcclxuICB0aWY6ICdpbWFnZS90aWZmJyxcclxuICB0aWZmOiAnaW1hZ2UvdGlmZicsXHJcbiAgaWNvOiAnaW1hZ2UveC1pY29uJyxcclxuICB3ZWJwOiAnaW1hZ2Uvd2VicCdcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBibG9nQXBpID0ge1xyXG4gIGluaXRCbG9nQXBpKHNpdGVVcmw6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIG5ldyBNZXRhV2VibG9nKHNpdGVVcmwpO1xyXG4gIH0sXHJcbiAgbmV3UG9zdChtZXRhV2VibG9nOiBNZXRhV2VibG9nLCB1c2VybmFtZTogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nLCBwb3N0OiBhbnkpIHtcclxuICAgIHJldHVybiBtZXRhV2VibG9nLm5ld1Bvc3QoJycsIHVzZXJuYW1lLCBwYXNzd29yZCwgcG9zdCwgdHJ1ZSk7XHJcbiAgfSxcclxuICBlZGl0UG9zdChtZXRhV2VibG9nOiBNZXRhV2VibG9nLCBwb3N0aWQ6IHN0cmluZywgdXNlcm5hbWU6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZywgcG9zdDogYW55KSB7XHJcbiAgICByZXR1cm4gbWV0YVdlYmxvZy5lZGl0UG9zdChwb3N0aWQsIHVzZXJuYW1lLCBwYXNzd29yZCwgcG9zdCwgdHJ1ZSk7IC8vIHJldHVybiB0cnVlXHJcbiAgfSxcclxuICBnZXRQb3N0KG1ldGFXZWJsb2c6IE1ldGFXZWJsb2csIHBvc3RpZDogc3RyaW5nLCB1c2VybmFtZTogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gbWV0YVdlYmxvZy5nZXRQb3N0KHBvc3RpZCwgdXNlcm5hbWUsIHBhc3N3b3JkKTtcclxuICB9LFxyXG4gIG5ld01lZGlhT2JqZWN0KG1ldGFXZWJsb2c6IE1ldGFXZWJsb2csIHVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcsIGltZ05hbWU6IHN0cmluZywgZmlsZVBhdGg6IHN0cmluZyk6IGFueSB7XHJcbiAgICBjb25zdCBiaXRzID0gQnVmZmVyLmZyb20oZnMucmVhZEZpbGVTeW5jKGZpbGVQYXRoKSk7XHJcbiAgICBjb25zdCBtZWRpYU9iamVjdDogYW55ID0ge1xyXG4gICAgICBuYW1lOiBpbWdOYW1lLFxyXG4gICAgICB0eXBlOiBnZXRNaW1lVHlwZShmaWxlUGF0aCksXHJcbiAgICAgIGJpdHMsXHJcbiAgICAgIG92ZXJ3cml0ZTogdHJ1ZVxyXG4gICAgfTtcclxuICAgIHJldHVybiBtZXRhV2VibG9nLm5ld01lZGlhT2JqZWN0KCcnLCB1c2VybmFtZSwgcGFzc3dvcmQsIG1lZGlhT2JqZWN0KTtcclxuICB9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBnZXRNaW1lVHlwZShmaWxlUGF0aDogc3RyaW5nKSB7XHJcbiAgbGV0IGV4dCA9IHBhdGguZXh0bmFtZShmaWxlUGF0aCk7XHJcbiAgZXh0ID0gKGV4dCAmJiBleHQubGVuZ3RoID4gMSAmJiBleHQuc3Vic3RyaW5nKDEpKSB8fCAnJzsgLy8ganBnXHJcbiAgY29uc3QgdHlwZSA9IE1FRElBX01JTUVfVFlQRVNbZXh0XTtcclxuICBpZiAoIXR5cGUpIHRocm93IG5ldyBFcnJvcihgJHtleHR9IOatpOWqkuS9k+WQjue8gOS4jeaUr+aMgWApO1xyXG4gIHJldHVybiB0eXBlO1xyXG59XHJcblxyXG4iXSwibmFtZXMiOlsib3B0aW9ucyIsInN0b3JlU2V0dGluZ3MiLCJTdG9yZV9fZGVmYXVsdCIsInN0b3JlUmVjb3JkIiwic3RvcmUiLCJrZXkiLCJ2YWx1ZSIsInJlcyIsInRoZW1lIiwibm9kZUZzIiwiZnNfX2RlZmF1bHQiLCJmaWxlIiwicGljIiwiX3BhdGgiLCJwYXRoX19kZWZhdWx0IiwicGF0aDIiLCJub2RlUGF0aCIsImlzVXJsIiwic3RyIiwidXJsIiwidXJsRXhpc3RzIiwidXJsJDEiLCJyZXNvbHZlIiwiaHR0cF9fZGVmYXVsdCIsIm90aGVyIiwiZWxlY3Ryb24iLCJ2YWxpZENoYW5uZWxzIiwiaXBjIiwiY2hhbm5lbCIsImRhdGEiLCJmdW5jIiwic3Vic2NyaXB0aW9uIiwiZXZlbnQiLCJhcmdzIiwiTUVESUFfTUlNRV9UWVBFUyIsImJsb2dBcGkiLCJzaXRlVXJsIiwiTWV0YVdlYmxvZ19fZGVmYXVsdCIsIm1ldGFXZWJsb2ciLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwicG9zdCIsInBvc3RpZCIsImltZ05hbWUiLCJmaWxlUGF0aCIsImJpdHMiLCJtZWRpYU9iamVjdCIsImdldE1pbWVUeXBlIiwiZXh0IiwidHlwZSJdLCJtYXBwaW5ncyI6ImdXQVFBQSxFQUFBLENBQWdCLEtBQUEsV0FDUixJQUFBLFVBQ0QsU0FBQSxDQUNLLFFBQUEsQ0FDQyxhQUFBLFVBQ08sUUFBQSxHQUNMLFlBQUEsSUFDSSxVQUFBLEVBQ0YsRUFDYixNQUFBLENBQ08sQ0FDTCxLQUFBLHFCQUNRLElBQUEscUNBQ0QsU0FBQSxXQUNLLFNBQUEsR0FD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
